@{
    ViewData["Title"] = "My Profile";
    var userId = Context.Request.Query["uid"].ToString();
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js';
        import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD1cKu3p7mNrl5bJUT_zLPgI22uiWDiCcc",
            authDomain: "studentmanagement-fe332.firebaseapp.com",
            projectId: "studentmanagement-fe332",
            storageBucket: "studentmanagement-fe332.appspot.com",
            messagingSenderId: "116679627050",
            appId: "1:116679627050:web:79a87a58b33b12412ace53"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        document.addEventListener('DOMContentLoaded', () => {
            const uid = '@userId';
            const profileRef = ref(database, `profiles/${uid}`);

            onValue(profileRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    document.getElementById('username').textContent = data.userName;
                    document.getElementById('fullName').textContent = data.fullName;
                    document.getElementById('bio').textContent = data.bio;
                } else {
                    document.getElementById('profileDetails').textContent = "Profile not found.";
                }
            }, {
                onlyOnce: true
            });
        });
    </script>
</head>

<body>
    <h2 class="mb-4">My Profile</h2>
    <div id="profileDetails">
        <p><strong>Username:</strong> <span id="username"></span></p>
        <p><strong>Full Name:</strong> <span id="fullName"></span></p>
        <p><strong>Bio:</strong> <span id="bio"></span></p>
    </div>
</body>

</html>
